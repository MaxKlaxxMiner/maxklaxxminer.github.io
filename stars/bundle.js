(()=>{"use strict";var t={962:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Const=void 0;class s{}e.Const=s,s.TickRate=720},986:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Entity=void 0,e.Entity=class{constructor(t){this.x=t.x,this.y=t.y,this.a="a"in t?t.a:0,this.mx="mx"in t?t.mx:0,this.my="my"in t?t.my:0,this.ma="ma"in t?t.ma:0,this.time=0}update(){this.x+=this.mx,this.y+=this.my,this.a+=this.ma,this.time++}toString(){return"x: "+this.x.toFixed(2)+", y: "+this.y.toFixed(2)+", a: "+(180/Math.PI*this.a).toFixed(2)}}},468:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;const i=s(962),n=s(950),o=s(445),r=s(949),a=s(986),h=s(13),y=s(459);e.Game=class{constructor(){this.tick=0,this.timePos=Date.now(),this.frameCounter=[],this.fpsMode="vsync",this.entity=new a.Entity({x:0,y:0});const t=document.createElement("div");t.style.position="absolute",t.style.fontFamily="JetBrains Mono, monospace",t.style.fontSize="24px",t.style.padding="16px",t.style.color="#5af",document.body.appendChild(t),this.sc=t;const e=document.createElement("canvas");this.vp=new o.Viewport(e,y.Tools.getWindowSize()),document.body.appendChild(e)}run(){this.init((()=>{const t=()=>{for(this.frameCounter.push(Date.now());this.frameCounter[this.frameCounter.length-1]-1e3>this.frameCounter[0]&&this.frameCounter.length>2;)this.frameCounter=this.frameCounter.slice(1)};let e;e=()=>{"number"==typeof this.fpsMode?setTimeout(e,1e3/this.fpsMode):requestAnimationFrame(e);try{let e=this.tick;for(;Date.now()>this.timePos;)this.tick++,this.calc(),this.timePos+=1e3/i.Const.TickRate,"max"==this.fpsMode&&(t(),this.draw(),e=this.tick);this.tick>e&&(t(),this.draw())}catch(t){if(0===document.location.host.indexOf("localhost:"))throw e=()=>{},t}},e()}))}init(t){t()}calc(){(n.keys[n.Key.D]||n.keys[n.Key.Right])&&(this.entity.mx+=.001+Math.abs(3e-4*this.entity.mx)),(n.keys[n.Key.A]||n.keys[n.Key.Left])&&(this.entity.mx-=.001+Math.abs(3e-4*this.entity.mx)),(n.keys[n.Key.W]||n.keys[n.Key.Up])&&(this.entity.my+=.001+Math.abs(3e-4*this.entity.my)),(n.keys[n.Key.S]||n.keys[n.Key.Down])&&(this.entity.my-=.001+Math.abs(3e-4*this.entity.my)),n.keys[n.Key.Space]&&(this.entity.mx*=.995,this.entity.my*=.995),n.keys[n.Key.BackSpace]&&(this.entity.mx=0,this.entity.my=0),this.entity.update()}draw(){this.entity.a=h.Vec.getAngle(h.Vec.getMove(this.entity));let t=this.frameCounter.length-1+" fps ("+this.tick+" / "+(this.tick*(1e3/i.Const.TickRate)/1e3).toFixed(1)+")";t+=", keys: {"+Object.keys(n.keys).filter((t=>n.keys[Number(t)])).map((t=>(0,n.keyToString)(Number(t)))).join(", ")+"}",t+="<br />Pos: "+this.entity,this.sc.innerHTML=t,this.vp.setPos(this.entity),r.StarBackground.drawAutoBackground(this.vp,this.entity)}}},949:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StarBackground=void 0;const i=s(672),n=s(13);class o{static getStarLayers(t){if(this.starLayers&&this.starLayers.length===t)return this.starLayers;const e=new i.RandomMersenne(12345),s=new Array(t);for(let t=0;t<s.length;t++){const i=new Uint32Array(256);for(let t=0;t<i.length;t++){const s=e.nextInt()>>8&4095,n=e.nextInt()>>8&4095;i[t]=s|n<<16}s[t]=i}return this.starLayers=s}static drawBackground(t,e=2,s=24,i=1,n=4){const o=t.ctx;o.save(),t.setSmooth(!0),o.fillStyle="#000",o.fillRect(0,0,t.w,t.h),o.fillStyle="#fff";const r=this.getStarLayers(s);for(let s=r.length-1;s>=0;s--){const n=s*e+(i+1),a=1/n,h=t.x-(t.w*n>>1)-125>>12,y=t.x+(t.w*n>>1)+4096+125>>12,c=t.y-(t.h*n>>1)-125>>12,m=t.y+(t.h*n>>1)+4096+125>>12;for(let e=c;e<m;e++)for(let i=h;i<y;i++){const n=(i<<12)-t.x,h=(e<<12)-t.y,y=r[s][1073741824+(i>>0)&15|(1073741824+(e>>0)&15)<<4];o.fillRect(t.w/2+((65535&y)+n-12.5)*a,t.h/2+((y>>16)+h-12.5)*a,25*a,25*a)}}o.restore()}static drawBackgroundShift(t,e,s=10,i=2,n=24,o=1,r=4){const a=t.ctx;a.save(),t.setSmooth(!0),a.fillStyle="#000",a.fillRect(0,0,t.w,t.h),a.fillStyle="#fff";const h=this.getStarLayers(n);for(let r=h.length-1;r>=0;r--){const y=r>n/3;a.globalAlpha=y?1:Math.max(.5,1-s/10);const c=r*i+(o+1),m=1/c,l=t.x-(t.w*c>>1)-125>>12,d=t.x+(t.w*c>>1)+4096+125>>12,u=t.y-(t.h*c>>1)-125>>12,x=t.y+(t.h*c>>1)+4096+125>>12;for(let i=u;i<x;i++)for(let n=l;n<d;n++){const o=(n<<12)-t.x,c=(i<<12)-t.y,l=h[r][1073741824+(n>>0)&15|(1073741824+(i>>0)&15)<<4];y?a.fillRect(t.w/2+((65535&l)+o-12.5)*m,t.h/2+((l>>16)+c-12.5)*m,25*m,25*m):(a.translate(t.w/2+((65535&l)+o)*m,t.h/2+((l>>16)+c)*m),a.rotate(-e),a.fillRect(-12.5*m,m*s*-12.5,25*m,m*s*25),a.resetTransform())}}a.restore()}static drawAutoBackground(t,e){t.y=-t.y;const s=Math.sqrt(e.mx*e.mx+e.my*e.my);if(s>4){const i=-n.Vec.getHeadingAngle(e,n.Vec.getPredictedPos(e,1));o.drawBackgroundShift(t,i,s-3)}else o.drawBackground(t);t.y=-t.y}}e.StarBackground=o},13:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Vec=void 0;class s{static set(t,e){t.x=e.x,t.y=e.y}static setA(t,e){t.x=e.x,t.y=e.y,t.a=e.a}static getAdd(t,e){return{x:t.x+e.x,y:t.y+e.y}}static getSub(t,e){return{x:t.x-e.x,y:t.y-e.y}}static getLerp(t,e,s){return{x:t.x+(e.x-t.x)*s,y:t.y+(e.y-t.y)*s}}static getMag(t){return Math.sqrt(t.x*t.x+t.y*t.y)}static getDistance(t,e){return s.getMag(s.getSub(t,e))}static getAngle(t){return Math.atan2(t.x,t.y)}static getMove(t){return{x:t.mx,y:t.my,a:t.ma}}static getHeadingAngle(t,e){return s.getAngle(s.getSub(t,e))}static getVecFromAngle(t,e){return{x:Math.sin(t)*e,y:Math.cos(t)*e}}static getPredictedPos(t,e){return{x:t.x+t.mx*e,y:t.y+t.my*e,a:t.a+t.ma*e}}}e.Vec=s},950:(t,e)=>{var s;Object.defineProperty(e,"__esModule",{value:!0}),e.keyToString=e.keys=e.Key=void 0,function(t){t[t.BackSpace=8]="BackSpace",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Shift=16]="Shift",t[t.Ctrl=17]="Ctrl",t[t.Alt=18]="Alt",t[t.Esc=27]="Esc",t[t.Space=32]="Space",t[t.Left=37]="Left",t[t.Up=38]="Up",t[t.Right=39]="Right",t[t.Down=40]="Down",t[t.D0=48]="D0",t[t.D1=49]="D1",t[t.D2=50]="D2",t[t.D3=51]="D3",t[t.D4=52]="D4",t[t.D5=53]="D5",t[t.D6=54]="D6",t[t.D7=55]="D7",t[t.D8=56]="D8",t[t.D9=57]="D9",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.Num0=96]="Num0",t[t.Num1=97]="Num1",t[t.Num2=98]="Num2",t[t.Num3=99]="Num3",t[t.Num4=100]="Num4",t[t.Num5=101]="Num5",t[t.Num6=102]="Num6",t[t.Num7=103]="Num7",t[t.Num8=104]="Num8",t[t.Num9=105]="Num9",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12"}(s||(e.Key=s={})),e.keys={},document.body.onkeydown=t=>{e.keys[t.keyCode]||console.log("key pressed: "+t.keyCode+(e.keys[t.keyCode]?" (Keys."+e.keys[t.keyCode]+")":"")),e.keys[t.keyCode]=!0},document.body.onkeyup=t=>{e.keys[t.keyCode]=!1},e.keyToString=function(t){return s[t]?s[t]:"Code"+t}},672:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RandomFast=e.RandomMersenne=void 0,e.RandomMersenne=class{constructor(t){void 0===t&&(t=Date.now()),this.m=new Array(624),this.n=0,this.init(t)}init(t){this.m[0]=t>>>0;for(let t=1;t<624;t++){const e=this.m[t-1]^this.m[t-1]>>>30;this.m[t]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+t,this.m[t]>>>=0}this.nextBlock()}nextBlock(){let t;for(let e=0;e<227;e++)t=2147483648&this.m[e]|2147483647&this.m[e+1],this.m[e]=this.m[e+397]^t>>>1^2567483615*(1&t);for(let e=227;e<623;e++)t=2147483648&this.m[e]|2147483647&this.m[e+1],this.m[e]=this.m[e-227]^t>>>1^2567483615*(1&t);t=2147483648&this.m[623]|2147483647&this.m[0],this.m[623]=this.m[396]^t>>>1^2567483615*(1&t),this.n=0}nextInt(){let t=this.m[this.n++];return this.n>=624&&this.nextBlock(),t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,t^=t>>>18,t>>>0}next(){return this.nextInt()/4294967296}},e.RandomFast=class{constructor(t){this.n=t>>>0}nextInt(){return this.n=16807*this.n>>>0}next(){return this.nextInt()/4294967296}}},459:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tools=void 0,e.Tools=class{static getWindowSize(){return{w:window.innerWidth,h:window.innerHeight}}}},445:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Viewport=void 0;const i=s(459);e.Viewport=class{constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.x=0,this.y=0,this.w=0,this.h=0,this.resize(e),window.addEventListener("resize",(()=>{this.resize(i.Tools.getWindowSize())}))}resize(t){this.w=t.w,this.h=t.h,this.canvas.width=this.w,this.canvas.height=this.h,this.setSmooth(!1),this.ctx.imageSmoothingQuality="high"}setSmooth(t){this.ctx.imageSmoothingEnabled=t}setPos(t){this.x=t.x,this.y=t.y}}}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,s),o.exports}(()=>{const t=s(468);window.onload=()=>{(new t.Game).run()}})()})();